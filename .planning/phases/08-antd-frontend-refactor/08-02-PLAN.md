---
phase: 08-antd-frontend-refactor
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/components/DropZone/DropZone.tsx
  - frontend/src/components/DropZone/DropZone.css
autonomous: true

must_haves:
  truths:
    - "User can drag PDF onto drop zone"
    - "User can click to browse for PDF"
    - "Invalid file types are rejected with error message"
    - "Processing state shows loading indicator"
  artifacts:
    - path: "frontend/src/components/DropZone/DropZone.tsx"
      provides: "Upload.Dragger component for PDF upload"
      contains: "Upload.Dragger"
  key_links:
    - from: "frontend/src/components/DropZone/DropZone.tsx"
      to: "App.tsx onFileAccepted"
      via: "beforeUpload callback"
      pattern: "onFileAccepted\\(file\\)"
---

<objective>
Replace the react-dropzone based DropZone component with Ant Design's Upload.Dragger component while maintaining the same external interface (onFileAccepted, isProcessing, error props).

Purpose: Upload.Dragger provides accessible file upload with built-in styling, eliminating custom CSS and handling edge cases that react-dropzone required manual handling for.

Output: DropZone component using Upload.Dragger with identical API for callers.
</objective>

<execution_context>
@C:\Users\abelb\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\abelb\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/08-antd-frontend-refactor/08-RESEARCH.md
@frontend/src/components/DropZone/DropZone.tsx
@frontend/src/components/DropZone/DropZone.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace DropZone with Upload.Dragger</name>
  <files>frontend/src/components/DropZone/DropZone.tsx</files>
  <action>
Rewrite DropZone.tsx to use Ant Design Upload.Dragger:

```typescript
import { Upload, message, Alert, Spin } from 'antd';
import { InboxOutlined } from '@ant-design/icons';
import type { UploadProps } from 'antd';

const { Dragger } = Upload;

interface DropZoneProps {
  onFileAccepted: (file: File) => void;
  isProcessing: boolean;
  error?: string | null;
}

export function DropZone({ onFileAccepted, isProcessing, error }: DropZoneProps) {
  const uploadProps: UploadProps = {
    name: 'file',
    accept: '.pdf,application/pdf',
    multiple: false,
    disabled: isProcessing,
    showUploadList: false,
    beforeUpload: (file) => {
      // Validate file type (workaround for accept + drag issue per RESEARCH.md)
      if (file.type !== 'application/pdf' && !file.name.toLowerCase().endsWith('.pdf')) {
        message.error('Only PDF files are accepted');
        return Upload.LIST_IGNORE;
      }
      onFileAccepted(file);
      return false; // Prevent auto-upload, handle manually
    },
  };

  return (
    <div style={{ padding: '40px', maxWidth: '600px', margin: '0 auto' }}>
      {error && (
        <Alert
          message="Upload Error"
          description={error}
          type="error"
          showIcon
          style={{ marginBottom: 16 }}
        />
      )}

      <Dragger {...uploadProps}>
        {isProcessing ? (
          <div style={{ padding: '40px 0' }}>
            <Spin size="large" />
            <p style={{ marginTop: 16, color: 'rgba(0, 0, 0, 0.45)' }}>
              Processing...
            </p>
          </div>
        ) : (
          <>
            <p className="ant-upload-drag-icon">
              <InboxOutlined />
            </p>
            <p className="ant-upload-text">
              Drop PDF here or click to browse
            </p>
            <p className="ant-upload-hint">
              Only PDF files are accepted
            </p>
          </>
        )}
      </Dragger>
    </div>
  );
}
```

Key implementation notes:
- Props interface unchanged: onFileAccepted, isProcessing, error
- beforeUpload validates file type and calls onFileAccepted
- return false prevents antd's auto-upload behavior (we handle upload in App.tsx)
- showUploadList: false hides the file list (we navigate to results immediately)
- Alert component shows error state (replaces custom error styling)
- Spin component shows loading state (replaces custom spinner)
- Using inline styles for layout since we'll delete the CSS file
  </action>
  <verify>npm run build compiles without errors for DropZone.tsx</verify>
  <done>DropZone uses Upload.Dragger with same props interface</done>
</task>

<task type="auto">
  <name>Task 2: Delete custom DropZone CSS</name>
  <files>frontend/src/components/DropZone/DropZone.css</files>
  <action>
Delete the file `frontend/src/components/DropZone/DropZone.css` entirely.

Also update DropZone.tsx to remove the CSS import:
- Remove: `import './DropZone.css';`

The Ant Design Upload.Dragger component provides all necessary styling through its built-in CSS-in-JS. No custom styles needed.
  </action>
  <verify>ls frontend/src/components/DropZone/ shows only DropZone.tsx (no .css file)</verify>
  <done>DropZone.css deleted; no custom CSS for DropZone component</done>
</task>

</tasks>

<verification>
1. `npm run build` completes successfully
2. DropZone renders with Ant Design styling (blue dashed border, inbox icon)
3. Drag-and-drop works for PDF files
4. Click-to-browse works
5. Non-PDF files show error message
6. Processing state shows Spin component
7. Error prop shows Alert component
</verification>

<success_criteria>
- DropZone.tsx uses Upload.Dragger from antd
- Props interface unchanged (onFileAccepted, isProcessing, error)
- DropZone.css deleted
- No import of react-dropzone
- PDF upload works via drag or click
- Error states display with Alert component
- Loading state displays with Spin component
</success_criteria>

<output>
After completion, create `.planning/phases/08-antd-frontend-refactor/08-02-SUMMARY.md`
</output>
