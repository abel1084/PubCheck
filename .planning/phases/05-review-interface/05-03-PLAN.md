---
phase: 05-review-interface
plan: 03
type: execute
wave: 2
depends_on: ["05-01"]
files_modified:
  - frontend/src/components/CheckResults/CheckResults.tsx
  - frontend/src/components/CheckResults/CheckResults.css
  - frontend/src/components/CheckResults/index.ts
autonomous: true

must_haves:
  truths:
    - "Summary bar appears above the issue categories"
    - "Filter buttons change which issues are visible"
    - "Selection state persists across filter changes"
    - "Counts update when issues are selected/deselected"
  artifacts:
    - path: "frontend/src/components/CheckResults/CheckResults.tsx"
      provides: "CheckResults with integrated review state"
      contains: "useReviewState"
    - path: "frontend/src/components/CheckResults/CheckResults.css"
      provides: "Styles for review UI elements"
      contains: "review-summary-bar"
  key_links:
    - from: "CheckResults.tsx"
      to: "useReviewState"
      via: "hook integration"
      pattern: "useReviewState\\(.*categories\\)"
    - from: "CheckResults.tsx"
      to: "ReviewSummaryBar"
      via: "component render"
      pattern: "<ReviewSummaryBar"
    - from: "CheckResults.tsx"
      to: "CategorySection"
      via: "passes review handlers"
      pattern: "CategorySection.*selectedIssues.*onToggleSelect"
---

<objective>
Wire the review state hook into CheckResults, add the summary bar, and create CSS styles for all review interface elements.

Purpose: Complete the integration of review functionality, making the summary bar visible and filters functional. CSS ensures proper visual presentation.

Output: Fully functional review interface with filtering and selection.
</objective>

<execution_context>
@C:\Users\abelb\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\abelb\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-review-interface/05-RESEARCH.md
@.planning/phases/05-review-interface/05-01-SUMMARY.md
@frontend/src/components/CheckResults/CheckResults.tsx
@frontend/src/components/CheckResults/CheckResults.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Integrate review state into CheckResults</name>
  <files>frontend/src/components/CheckResults/CheckResults.tsx</files>
  <action>
Wire useReviewState hook and ReviewSummaryBar into CheckResults:

1. Add imports at top:
   ```typescript
   import { useReviewState } from '../../hooks/useReviewState';
   import { ReviewSummaryBar } from './ReviewSummaryBar';
   ```

2. Use the review state hook after combining categories:
   ```typescript
   // After sortedCategories is computed
   const {
     selectedIssues,
     notes,
     severityFilter,
     filteredCategories,
     counts,
     toggleSelection,
     selectAll,
     deselectAll,
     setNote,
     setFilter,
   } = useReviewState(sortedCategories);
   ```

3. Add ReviewSummaryBar after the header section:
   - Place between check-results__header and AIProgress
   - Only show when there are issues (totalErrors + totalWarnings > 0)
   ```typescript
   {(totalErrors + totalWarnings > 0) && (
     <ReviewSummaryBar
       totalIssues={counts.total}
       selectedCount={counts.selected}
       errorCount={counts.errors}
       warningCount={counts.warnings}
       filter={severityFilter}
       onFilterChange={setFilter}
       onSelectAll={selectAll}
       onDeselectAll={deselectAll}
     />
   )}
   ```

4. Update CategorySection rendering to use filteredCategories and pass review props:
   ```typescript
   {filteredCategories.map((category) => (
     <CategorySection
       key={category.category_id}
       category={category}
       selectedIssues={selectedIssues}
       notes={notes}
       onToggleSelect={toggleSelection}
       onNoteChange={setNote}
     />
   ))}
   ```

5. Update the "all passed" check to account for filtering:
   - Show "All checks passed" when no issues exist (not just filtered out)
   - When filtering hides all issues, still show the summary bar

Keep all existing AI integration intact.
  </action>
  <verify>TypeScript compiles and app starts: `cd frontend && npm run dev`</verify>
  <done>CheckResults displays summary bar, applies filter, passes selection/notes to categories</done>
</task>

<task type="auto">
  <name>Task 2: Add CSS styles for review interface</name>
  <files>frontend/src/components/CheckResults/CheckResults.css</files>
  <action>
Add CSS for review-related components following existing BEM patterns:

1. ReviewSummaryBar styles:
   ```css
   .review-summary-bar {
     display: flex;
     flex-wrap: wrap;
     align-items: center;
     gap: 1rem;
     padding: 0.75rem 1rem;
     background: var(--surface-2, #f5f5f5);
     border-radius: 6px;
     margin-bottom: 1rem;
   }

   .review-summary-bar__counts {
     flex: 1;
     font-size: 0.9rem;
     color: var(--text-secondary, #666);
   }

   .review-summary-bar__actions {
     display: flex;
     gap: 0.5rem;
   }

   .review-summary-bar__actions button {
     padding: 0.25rem 0.75rem;
     font-size: 0.8rem;
     border: 1px solid var(--border, #ccc);
     border-radius: 4px;
     background: white;
     cursor: pointer;
   }

   .review-summary-bar__actions button:hover {
     background: var(--surface-2, #f5f5f5);
   }

   .review-summary-bar__filters {
     display: flex;
     gap: 0.25rem;
   }

   .review-summary-bar__filter {
     padding: 0.25rem 0.75rem;
     font-size: 0.8rem;
     border: 1px solid var(--border, #ccc);
     border-radius: 4px;
     background: white;
     cursor: pointer;
   }

   .review-summary-bar__filter--active {
     background: var(--primary, #0066cc);
     color: white;
     border-color: var(--primary, #0066cc);
   }
   ```

2. IssueCard review mode styles:
   ```css
   .issue-card--reviewable {
     display: flex;
     gap: 0.75rem;
     align-items: flex-start;
   }

   .issue-card__selection {
     flex-shrink: 0;
     padding-top: 0.25rem;
   }

   .issue-card__checkbox {
     width: 18px;
     height: 18px;
     cursor: pointer;
   }

   .issue-card__notes-section {
     margin-top: 0.75rem;
     padding-top: 0.75rem;
     border-top: 1px solid var(--border, #eee);
   }

   .issue-card__notes-label {
     display: block;
     font-size: 0.8rem;
     font-weight: 500;
     color: var(--text-secondary, #666);
     margin-bottom: 0.25rem;
   }

   .issue-card__notes {
     width: 100%;
     padding: 0.5rem;
     font-size: 0.85rem;
     font-family: inherit;
     border: 1px solid var(--border, #ccc);
     border-radius: 4px;
     resize: vertical;
     min-height: 50px;
   }

   .issue-card__notes:focus {
     outline: none;
     border-color: var(--primary, #0066cc);
   }
   ```

3. Ensure existing styles are not broken - add new styles at end of file.
  </action>
  <verify>CSS file contains required classes: `grep -q "review-summary-bar" frontend/src/components/CheckResults/CheckResults.css && grep -q "review-summary-bar__filter--active" frontend/src/components/CheckResults/CheckResults.css && echo "CSS verified"`</verify>
  <done>All review UI elements have proper styling matching existing design</done>
</task>

<task type="auto">
  <name>Task 3: Update component index exports</name>
  <files>frontend/src/components/CheckResults/index.ts</files>
  <action>
Add ReviewSummaryBar to the component exports:

Read current index.ts and add:
```typescript
export { ReviewSummaryBar } from './ReviewSummaryBar';
```

This makes the component available for import from the CheckResults directory.
  </action>
  <verify>Import works: `cd frontend && npx tsc --noEmit`</verify>
  <done>ReviewSummaryBar exported from CheckResults index</done>
</task>

</tasks>

<verification>
1. Summary bar appears when issues exist
2. Filter buttons toggle and update visible issues
3. Selection persists when filter changes
4. Checkboxes align properly with issue content
5. Notes textarea is styled consistently
6. TypeScript compiles without errors
7. All existing functionality still works
</verification>

<success_criteria>
- CheckResults uses useReviewState hook
- ReviewSummaryBar renders with correct counts
- Filter buttons work: All shows all, Errors shows errors only, Warnings shows warnings only
- Selection state updates counts in real-time
- CSS follows existing BEM naming convention
- Satisfies REVW-04 (filter) and REVW-05 (summary bar)
</success_criteria>

<output>
After completion, create `.planning/phases/05-review-interface/05-03-SUMMARY.md`
</output>
