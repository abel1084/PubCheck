---
phase: 01-pdf-foundation-extraction
plan: 05
type: execute
wave: 4
depends_on: ["01-04"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User has verified the complete upload-to-display workflow"
    - "All success criteria from Phase 1 roadmap are met"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete Phase 1 implementation with user testing.

Purpose: Confirm all Phase 1 success criteria are met before proceeding to Phase 2.

Output: User confirmation that Phase 1 is complete and ready for Phase 2 (Rule Configuration Engine).
</objective>

<execution_context>
@C:\Users\abelb\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\abelb\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/LEARNINGS.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-pdf-foundation-extraction/01-CONTEXT.md
@.planning/phases/01-pdf-foundation-extraction/01-04-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete Phase 1: PDF Foundation and Extraction system including:
- Backend with PyMuPDF extraction (text, images, margins, metadata)
- Rasterized PDF detection and rejection
- Document type detection with confidence levels
- Frontend with drag-and-drop upload
- Tabbed data display (Text, Images, Margins, Metadata)
- Sortable tables throughout
- Document info sidebar with type override
  </what-built>
  <how-to-verify>
**Setup:**
1. Start backend: `cd backend && python -m uvicorn app.main:app --reload`
2. Start frontend: `cd frontend && npm run dev`
3. Open http://localhost:5173 in browser

**Test each Phase 1 Success Criterion:**

1. **Upload via drag-and-drop:**
   - Drag a PDF onto the drop zone
   - Verify: Border highlights, spinner shows, results appear
   - Try clicking "or click to browse" - file picker opens

2. **Document type detection:**
   - Check sidebar shows detected type (Factsheet, Policy Brief, etc.)
   - Check confidence level displayed (high/medium/low)
   - Click dropdown, change type, verify it updates

3. **Text extraction with fonts:**
   - Click "Text" tab
   - Verify: Font summary table shows font names, counts, pages
   - Verify: Clicking column headers sorts the table

4. **Image extraction with DPI:**
   - Click "Images" tab (if images exist in PDF)
   - Verify: Table shows dimensions, DPI, colorspace
   - Verify: Sortable by DPI (default should show low-res first)

5. **Margin calculation:**
   - Click "Margins" tab
   - Verify: Table shows Page, Top, Bottom, Inside, Outside
   - Verify: Values in mm (not points)

6. **Metadata display:**
   - Click "Metadata" tab
   - Verify: Shows Title, Author, ISBN, DOI, Job Number, etc.
   - Click "Show all metadata" - full JSON appears

**Error handling tests:**

7. **Rasterized PDF rejection:**
   - If you have a scanned/rasterized PDF, try uploading it
   - Verify: 422 error with explanation about text layers

8. **Non-PDF rejection:**
   - Try dragging a non-PDF file
   - Verify: Error message "Only PDF files are accepted"

9. **New document:**
   - Click "New Document" button in sidebar
   - Verify: Returns to upload view

**Overall quality check:**
- No console errors in browser dev tools
- Interface is responsive (no freezing during extraction)
- Tables scroll if content exceeds viewport
  </how-to-verify>
  <resume-signal>
Type one of:
- "approved" - All criteria pass, ready for Phase 2
- List specific issues found that need fixing
  </resume-signal>
</task>

</tasks>

<verification>
User has manually verified all Phase 1 success criteria.
</verification>

<success_criteria>
Phase 1 is complete when user confirms:
1. Can drag a PDF onto the application and see it accepted or rejected with clear feedback
2. Can see the detected document type with manual override option
3. Can view extracted text with font information displayed per text block
4. Can view extracted images with DPI and dimensions shown
5. Can see calculated margins for each page
</success_criteria>

<output>
After completion, create `.planning/phases/01-pdf-foundation-extraction/01-05-SUMMARY.md` with verification results.
</output>
