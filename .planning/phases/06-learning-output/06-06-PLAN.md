---
phase: 06-learning-output
plan: 06
type: execute
wave: 4
depends_on: ["06-05"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User can mark an issue to ignore and see it disappear"
    - "Undo button in toast restores the ignored rule"
    - "Ignored rules visible in Settings > Ignored Rules tab"
    - "Generate Report downloads annotated PDF with sticky notes"
    - "PDF sticky notes are colored by severity"
---

<objective>
User verification of complete learning system and PDF output generation.

Purpose: Verify all Phase 6 features work together from the user's perspective.
Output: User approval or issue list for fixes.
</objective>

<execution_context>
@C:\Users\abelb\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\abelb\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-learning-output/06-CONTEXT.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Verify Learning System and Output Generation</name>
  <what-built>
Complete learning system (ignore rules with undo) and PDF annotation output:
- Ignore button on each issue card (X icon, appears on hover)
- Toast notification with Undo button when ignoring
- Settings > Ignored Rules tab for managing ignored rules
- Ignored rules filtered from subsequent check results
- Generate Report button in summary bar
- Progress modal during PDF generation
- Annotated PDF with sticky notes at issue locations
- Summary annotation on page 1 with error/warning counts
  </what-built>
  <how-to-verify>
**Test Learning System:**
1. Start app: `python start.py`
2. Upload a PDF and run compliance check
3. Hover over an issue card - verify X button appears
4. Click X button on an issue - verify:
   - Issue immediately disappears from list
   - Toast appears at bottom-right: "Rule ignored for this document type"
   - Toast has "Undo" button
5. Click Undo within 5 seconds - verify:
   - Issue reappears in the list
   - Toast shows "Rule restored"
6. Ignore another rule (don't click Undo)
7. Open Settings > Ignored Rules tab - verify:
   - The ignored rule appears in the table
   - Shows Rule ID, Document Type, Date Added
8. Click Delete on the rule - verify it's removed
9. Run compliance check again - verify ignored rules don't appear

**Test PDF Generation:**
1. With check results showing issues, select some issues (checkboxes)
2. Click "Generate Report" button in summary bar - verify:
   - Progress modal appears with spinner
   - Modal says "Generating annotated PDF..."
   - After a moment, PDF downloads
3. Open the downloaded PDF - verify:
   - Sticky note on page 1 with "Review Summary: X Errors, Y Warnings"
   - Sticky notes at issue locations (or top-left if no coordinates)
   - Error notes are RED
   - Warning notes are YELLOW
4. Click on a sticky note - verify message appears
5. Test with no issues selected - verify Generate Report button is disabled

**Edge Cases:**
- Ignore all issues of a rule - verify rule persists correctly
- Multiple issues stacked on same page - verify notes don't overlap completely
- Upload same document type after ignoring - verify rules stay ignored
  </how-to-verify>
  <resume-signal>
Type "approved" if everything works correctly.
Otherwise, describe the issues found for fixing.
  </resume-signal>
</task>

</tasks>

<verification>
- [ ] User completed all verification steps
- [ ] Learning system working: ignore, undo, Settings management
- [ ] PDF generation working: select, generate, download, annotations visible
- [ ] All success criteria met
</verification>

<success_criteria>
LERN-01: User can mark issue to ignore in future reviews
LERN-02: Reason field optional (can be left blank)
LERN-03: Ignored rules persisted to JSON file
OUTP-01: Generate annotated PDF with sticky notes at issue locations
OUTP-03: Include only user-selected issues in outputs
</success_criteria>

<output>
After completion, create `.planning/phases/06-learning-output/06-06-SUMMARY.md`
</output>
