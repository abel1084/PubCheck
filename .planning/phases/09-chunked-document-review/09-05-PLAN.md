---
phase: 09-chunked-document-review
plan: 05
type: execute
wave: 4
depends_on: ["09-04"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "105-page PDF reviews successfully with chunk progress shown"
    - "Results stream progressively as chunks complete"
    - "Page numbers in findings are actual document pages"
    - "No duplicate issues from chunk overlaps"
    - "Small PDFs (<40 pages) work unchanged"
  artifacts: []
  key_links: []
---

<objective>
Verify chunked document review works end-to-end with real PDFs.

Purpose: Confirm all requirements are met with manual testing
Output: Verified chunked review functionality
</objective>

<execution_context>
@C:\Users\abelb\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\abelb\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/09-chunked-document-review/09-RESEARCH.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Chunked document review system:
- Backend chunker module with PDF splitting and extraction filtering
- Chunk-aware prompts with actual page numbers
- Parallel chunk processing with Semaphore(2) concurrency
- Issue deduplication for overlapping regions
- SSE events for chunk progress
- Frontend hook tracking chunk progress state
  </what-built>
  <how-to-verify>
**Test 1: Large Document (>40 pages)**
1. Start the app: `python start.py`
2. Upload a PDF with 50+ pages (ideally 100+ pages)
3. Click "Review"
4. Verify:
   - "Reviewing in X chunks" message appears
   - Chunk progress updates as chunks complete (e.g., "Chunk 1/3 complete")
   - Results stream progressively
   - Final review shows all sections (Overview, Needs Attention, Looking Good, Suggestions)
   - Page numbers in findings are actual document pages (not 1-35 for every chunk)
   - No duplicate issues (especially for pages in overlap regions)
   - Comment List tab shows deduplicated issues

**Test 2: Small Document (<40 pages)**
1. Upload a PDF with fewer than 40 pages
2. Click "Review"
3. Verify:
   - No chunk progress messages (not chunked)
   - Review streams normally as before
   - All functionality unchanged

**Test 3: Partial Failure Handling**
1. If possible, trigger a chunk failure (e.g., disconnect network mid-review)
2. Verify:
   - Error message shows which chunk failed
   - Completed chunks still show results
   - User gets partial review rather than total failure

**Test 4: Page Number Accuracy**
1. In the large document review, find an issue that references a specific page
2. Navigate to that page in the original PDF
3. Verify the issue is actually on that page (not a chunk-relative page)
  </how-to-verify>
  <resume-signal>
Type "approved" if all tests pass, or describe any issues found.
  </resume-signal>
</task>

</tasks>

<verification>
User confirms:
1. Large document reviews successfully with visible chunk progress
2. Small documents work unchanged
3. Page numbers are accurate (actual document pages)
4. No duplicate issues from overlaps
5. Partial failures handled gracefully
</verification>

<success_criteria>
- 105-page PDF successfully reviews without token limit error
- Results stream progressively as chunks complete
- Page numbers in findings are accurate (actual page numbers, not chunk-relative)
- No duplicate issues from chunk overlaps
- Clear error message if any chunk fails
- Small PDFs (<40 pages) work unchanged (no chunking)
</success_criteria>

<output>
After completion, create `.planning/phases/09-chunked-document-review/09-05-SUMMARY.md`
</output>
