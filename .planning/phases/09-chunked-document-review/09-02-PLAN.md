---
phase: 09-chunked-document-review
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/types/review.ts
autonomous: true

must_haves:
  truths:
    - "ChunkProgress type exists with chunk number, total, and page range"
    - "AIReviewState includes chunk progress fields"
    - "Types are exported and usable by hooks"
  artifacts:
    - path: "frontend/src/types/review.ts"
      provides: "Chunk progress types for frontend"
      exports: ["ChunkProgress", "AIReviewState"]
  key_links:
    - from: "frontend/src/types/review.ts"
      to: "frontend/src/hooks/useAIReview.ts"
      via: "type import"
      pattern: "import.*ChunkProgress"
---

<objective>
Add TypeScript types for chunk progress tracking in the frontend.

Purpose: Enable the review hook to track and display chunk-by-chunk progress
Output: ChunkProgress type and extended AIReviewState with chunk tracking fields
</objective>

<execution_context>
@C:\Users\abelb\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\abelb\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/09-chunked-document-review/09-RESEARCH.md
@frontend/src/types/review.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add chunk progress types and extend AIReviewState</name>
  <files>frontend/src/types/review.ts</files>
  <action>
Add new types to review.ts (keep all existing types):

1. **ChunkProgress interface** (add after ReviewIssue interface):
```typescript
/**
 * Progress information for a single chunk during chunked review.
 * Emitted as chunks complete processing.
 */
export interface ChunkProgress {
  /** Chunk number (1-indexed) */
  chunk: number;
  /** Total number of chunks */
  total: number;
  /** Start page number (1-indexed, actual document page) */
  startPage: number;
  /** End page number (1-indexed, actual document page, inclusive) */
  endPage: number;
  /** Whether this chunk completed successfully */
  success: boolean;
  /** Error message if chunk failed */
  error?: string;
}
```

2. **Extend AIReviewState interface** with chunk fields (add to existing interface):
```typescript
  /** Whether document is being reviewed in chunks */
  isChunked: boolean;
  /** Total number of chunks (0 if not chunked) */
  totalChunks: number;
  /** Number of chunks completed so far */
  completedChunks: number;
  /** Progress info for each completed chunk */
  chunkProgress: ChunkProgress[];
```

3. **Update INITIAL_AI_REVIEW_STATE** to include new fields:
```typescript
  isChunked: false,
  totalChunks: 0,
  completedChunks: 0,
  chunkProgress: [],
```

Keep all existing types, functions (parseReviewIssues, parseReviewSections), and exports unchanged.
  </action>
  <verify>
Run: cd frontend && npx tsc --noEmit src/types/review.ts
Expected: No type errors
  </verify>
  <done>
ChunkProgress interface exists with chunk number, total, page range, success, and optional error.
AIReviewState extended with isChunked, totalChunks, completedChunks, and chunkProgress fields.
INITIAL_AI_REVIEW_STATE includes default values for new fields.
All existing types and functions preserved.
  </done>
</task>

</tasks>

<verification>
1. TypeScript compiles without errors: `cd frontend && npx tsc --noEmit`
2. ChunkProgress type is exported: grep for "export interface ChunkProgress"
3. AIReviewState has isChunked, totalChunks, completedChunks, chunkProgress fields
4. INITIAL_AI_REVIEW_STATE has default values for chunk fields
</verification>

<success_criteria>
- ChunkProgress interface with chunk, total, startPage, endPage, success, error fields
- AIReviewState extended with chunk tracking fields
- INITIAL_AI_REVIEW_STATE updated with default chunk field values
- TypeScript compiles without errors
- All existing types and functions preserved
</success_criteria>

<output>
After completion, create `.planning/phases/09-chunked-document-review/09-02-SUMMARY.md`
</output>
