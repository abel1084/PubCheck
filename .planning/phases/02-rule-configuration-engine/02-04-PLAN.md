---
phase: 02-rule-configuration-engine
plan: 04
type: execute
wave: 4
depends_on: ["02-03"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User can open Settings and see 5 document type tabs (Factsheet, Policy Brief, Issue Note, Working Paper, Report/Publication)"
    - "User can toggle any rule on/off and see the change reflected immediately"
    - "User can change rule severity between Error and Warning"
    - "User can see rule changes persist after closing and reopening the application"
  artifacts: []
  key_links: []
---

<objective>
User verification of the Rule Configuration Engine.

Purpose: Confirm that all Phase 2 requirements are met through hands-on testing of the Settings UI.

Output: User approval or list of issues to address.
</objective>

<execution_context>
@C:\Users\abelb\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\abelb\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-rule-configuration-engine/02-CONTEXT.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete Rule Configuration Engine with:
- 3 YAML templates covering 5 document types
- REST API for rules CRUD operations
- Settings UI with 5 document type tabs
- Collapsible rule categories with enabled counts
- Rule enable/disable checkboxes
- Severity toggle (Error/Warning)
- Save and Reset buttons
- Unsaved changes warning
  </what-built>
  <how-to-verify>
**Setup:**
1. Ensure backend is running: `cd backend && uvicorn app.main:app --reload`
2. Ensure frontend is running: `cd frontend && npm run dev`
3. Open http://localhost:5173 in browser

**Test 1: Settings Access**
1. Click the Settings button in the app header
2. Verify you see 5 tabs: Factsheet, Policy Brief, Issue Note, Working Paper, Report/Publication
3. Expected: Tabs are visible and clickable

**Test 2: Rule Categories**
1. In Settings, select any document type tab
2. Verify you see collapsible categories: Cover, Margins, Typography, Images, Required Elements
3. Each category header should show enabled count like "Typography (8/12 enabled)"
4. Click a category header to collapse/expand
5. Expected: Categories expand/collapse smoothly

**Test 3: Toggle Rules (CONF-03)**
1. Find any enabled rule (checkbox checked)
2. Uncheck the checkbox
3. Verify the enabled count in the category header decreases
4. Expected: Rule toggles immediately, count updates

**Test 4: Change Severity (CONF-04)**
1. Find a rule with severity "Error"
2. Click the severity toggle to change to "Warning"
3. Expected: Severity changes immediately in the UI

**Test 5: Save Changes**
1. Make some changes (toggle a rule, change a severity)
2. Verify Save button is enabled
3. Click Save
4. Verify Save button briefly shows "Saved" then returns to "Save"
5. Expected: Changes saved without errors

**Test 6: Reset to Defaults**
1. Make some changes
2. Click Reset
3. Verify all changes are reverted
4. Expected: Rules return to original state

**Test 7: Persistence**
1. Make some changes and Save
2. Close the Settings
3. Reopen Settings
4. Verify your changes are still there
5. Refresh the page (F5)
6. Open Settings again
7. Expected: Changes persist after page refresh

**Test 8: Unsaved Changes Warning**
1. Make some changes (don't save)
2. Try to close Settings or navigate away
3. Expected: Browser warning about unsaved changes appears
  </how-to-verify>
  <resume-signal>
Type "approved" if all tests pass, or describe any issues found.
  </resume-signal>
</task>

</tasks>

<verification>
User confirms all 4 Phase 2 success criteria are met:
1. User can open Settings and see 5 document type tabs
2. User can toggle any rule on/off with immediate feedback
3. User can change rule severity between Error and Warning
4. Changes persist after closing and reopening the application
</verification>

<success_criteria>
User types "approved" after verifying all functionality works correctly.
</success_criteria>

<output>
After completion, create `.planning/phases/02-rule-configuration-engine/02-04-SUMMARY.md`
</output>
