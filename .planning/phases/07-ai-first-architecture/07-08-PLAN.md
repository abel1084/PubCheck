---
phase: 07-ai-first-architecture
plan: 08
type: execute
wave: 4
depends_on: ["07-06", "07-07"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User can upload PDF and click Review"
    - "Review streams and displays in sectioned cards"
    - "Content appears progressively as AI generates"
    - "Sections show Overview, Needs Attention, Looking Good, Suggestions"
    - "Review reads like helpful colleague feedback"
    - "No programmatic check results appear"
  artifacts: []
  key_links: []
---

<objective>
User verification of the complete AI-first architecture.

Purpose: Confirm the entire system works end-to-end - upload PDF, click Review, see streaming prose review in sectioned cards with collegial tone.

Output: User-verified working system or list of issues to address.
</objective>

<execution_context>
@C:\Users\abelb\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\abelb\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/07-ai-first-architecture/07-CONTEXT.md
@.planning/phases/07-ai-first-architecture/07-06-SUMMARY.md
@.planning/phases/07-ai-first-architecture/07-07-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete AI-first architecture overhaul:
- Backend: Checks module deleted, AI client rewritten for Claude with PDF support, streaming SSE endpoint created, rules context markdown files created
- Frontend: New useAIReview hook with SSE parsing, ReviewResults component with sectioned cards, App.tsx integrated with Review button, Settings removed, DataTabs collapsed by default
  </what-built>
  <how-to-verify>
1. **Start the application:**
   ```bash
   python start.py
   ```

2. **Set up ANTHROPIC_API_KEY:**
   - Ensure `ANTHROPIC_API_KEY` is set in `.env` file
   - Get key from: https://console.anthropic.com/settings/keys

3. **Upload a test PDF:**
   - Drag a UNEP document onto the upload area
   - Confirm document type is detected

4. **Click "Review" button:**
   - Should see "Reviewing..." state with spinner
   - Content should start streaming after a few seconds

5. **Verify streaming display:**
   - Watch text appear progressively in sectioned cards
   - Sections should appear: Overview, Needs Attention, Looking Good, Suggestions
   - Content should be prose, not JSON or structured data

6. **Verify collegial tone:**
   - Review should read like "helpful colleague" feedback
   - Examples: "The logo looks a bit small at 18mm" not "FAIL: Logo width 18mm < 20mm"
   - Measurements should be cited when relevant
   - Hedging for uncertain items: "This might be intentional, but..."

7. **Verify old UI removed:**
   - No "Check" button
   - No "Analyze with AI" button
   - No "Settings" button in header
   - No programmatic check results (categories like Cover, Margins, etc. with pass/fail)

8. **Verify DataTabs collapsed:**
   - Extracted Data section should be collapsed by default
   - Click to expand and verify data still accessible

9. **Test error handling:**
   - Try with invalid API key to confirm error displays gracefully
   - Try canceling mid-review to confirm abort works

**Expected result:**
- Streaming prose review in 4 sections
- Collegial, helpful tone
- Specific measurements cited
- No false positives for full-bleed images or decorative elements
- Clean, simplified UI
  </how-to-verify>
  <resume-signal>
Type "approved" if everything works correctly.
If issues found, describe them and I'll create fix tasks.
  </resume-signal>
</task>

</tasks>

<verification>
User has verified:
1. Review streams successfully
2. Content displays in sectioned cards
3. Tone is collegial (not audit checklist)
4. Old UI elements removed
5. DataTabs collapsed by default
6. Error handling works
</verification>

<success_criteria>
User approves the complete AI-first architecture with:
- Streaming prose review
- Sectioned card display
- Collegial tone
- Clean UI without Settings/Check/AI Analyze buttons
</success_criteria>

<output>
After completion, create `.planning/phases/07-ai-first-architecture/07-08-SUMMARY.md`
</output>
