---
phase: 07-ai-first-architecture
plan: 05
type: execute
wave: 2
depends_on: ["07-03"]
files_modified:
  - frontend/src/components/ReviewResults/ReviewResults.tsx
  - frontend/src/components/ReviewResults/ReviewResults.css
  - frontend/src/components/ReviewResults/ReviewSection.tsx
autonomous: true

must_haves:
  truths:
    - "Review displays in sectioned cards (Overview, Needs Attention, Looking Good, Suggestions)"
    - "Content renders as markdown prose"
    - "Streaming indicator shows during review"
    - "Sections appear progressively as content streams"
  artifacts:
    - path: "frontend/src/components/ReviewResults/ReviewResults.tsx"
      provides: "Main review results container"
      min_lines: 60
    - path: "frontend/src/components/ReviewResults/ReviewSection.tsx"
      provides: "Individual section card component"
      min_lines: 30
    - path: "frontend/src/components/ReviewResults/ReviewResults.css"
      provides: "Review results styling"
      min_lines: 40
  key_links:
    - from: "frontend/src/components/ReviewResults/ReviewResults.tsx"
      to: "frontend/src/types/review.ts"
      via: "ReviewSections type import"
      pattern: "ReviewSections"
---

<objective>
Create the ReviewResults component that displays AI review in sectioned cards.

Purpose: Implement the frontend UI for AI-driven reviews (ARCH-07) with prose content organized by priority sections. Displays streaming content progressively.

Output: ReviewResults component with sectioned cards, markdown rendering, streaming indicator.
</objective>

<execution_context>
@C:\Users\abelb\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\abelb\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/07-ai-first-architecture/07-CONTEXT.md
@.planning/phases/07-ai-first-architecture/07-RESEARCH.md
@.planning/phases/07-ai-first-architecture/07-03-SUMMARY.md
@frontend/src/types/review.ts
@frontend/src/components/CheckResults/CheckResults.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ReviewSection component</name>
  <files>frontend/src/components/ReviewResults/ReviewSection.tsx</files>
  <action>
Create directory `frontend/src/components/ReviewResults/` and the ReviewSection component:

```tsx
import ReactMarkdown from 'react-markdown';

interface ReviewSectionProps {
  title: string;
  content: string;
  variant: 'overview' | 'attention' | 'good' | 'suggestions';
  isStreaming?: boolean;
}

/**
 * Individual review section card.
 * Renders markdown content with variant-specific styling.
 */
export function ReviewSection({
  title,
  content,
  variant,
  isStreaming = false,
}: ReviewSectionProps) {
  // Don't render empty sections (unless streaming and might fill)
  if (!content && !isStreaming) {
    return null;
  }

  return (
    <section className={`review-section review-section--${variant}`}>
      <h3 className="review-section__title">{title}</h3>
      <div className="review-section__content">
        {content ? (
          <ReactMarkdown>{content}</ReactMarkdown>
        ) : (
          <span className="review-section__placeholder">
            {isStreaming ? 'Analyzing...' : 'No content'}
          </span>
        )}
      </div>
      {isStreaming && content && (
        <div className="review-section__streaming-indicator">
          <span className="review-section__cursor"></span>
        </div>
      )}
    </section>
  );
}
```

**Dependencies:**
- Install react-markdown if not present: `npm install react-markdown`
  </action>
  <verify>
- File exists at frontend/src/components/ReviewResults/ReviewSection.tsx
- Exports ReviewSection component
- Uses ReactMarkdown for content rendering
  </verify>
  <done>
- ReviewSection component created
- Markdown rendering implemented
- Streaming indicator included
  </done>
</task>

<task type="auto">
  <name>Task 2: Create ReviewResults container component</name>
  <files>frontend/src/components/ReviewResults/ReviewResults.tsx</files>
  <action>
Create the main ReviewResults component:

```tsx
import type { ReviewSections } from '../../types/review';
import { ReviewSection } from './ReviewSection';
import './ReviewResults.css';

interface ReviewResultsProps {
  sections: ReviewSections;
  isStreaming: boolean;
  isComplete: boolean;
  error: string | null;
  onRetry?: () => void;
}

/**
 * Main review results container.
 * Displays AI review organized by priority sections.
 */
export function ReviewResults({
  sections,
  isStreaming,
  isComplete,
  error,
  onRetry,
}: ReviewResultsProps) {
  // Show error state
  if (error) {
    return (
      <div className="review-results review-results--error">
        <div className="review-results__error">
          <h3>Review Failed</h3>
          <p>{error}</p>
          {onRetry && (
            <button
              type="button"
              className="review-results__retry-button"
              onClick={onRetry}
            >
              Try Again
            </button>
          )}
        </div>
      </div>
    );
  }

  // Show empty state before review starts
  const hasContent = Object.values(sections).some(s => s.length > 0);
  if (!hasContent && !isStreaming) {
    return (
      <div className="review-results review-results--empty">
        <p className="review-results__empty-text">
          Click "Review" to analyze the document for design compliance.
        </p>
      </div>
    );
  }

  // Show loading state when streaming but no content yet
  if (isStreaming && !hasContent) {
    return (
      <div className="review-results review-results--loading">
        <div className="review-results__loading-spinner"></div>
        <p className="review-results__loading-text">
          Analyzing document...
        </p>
      </div>
    );
  }

  return (
    <div className="review-results">
      <div className="review-results__header">
        <h2 className="review-results__title">Design Review</h2>
        {isComplete && (
          <span className="review-results__status review-results__status--complete">
            Review Complete
          </span>
        )}
        {isStreaming && (
          <span className="review-results__status review-results__status--streaming">
            Reviewing...
          </span>
        )}
      </div>

      <div className="review-results__sections">
        <ReviewSection
          title="Overview"
          content={sections.overview}
          variant="overview"
          isStreaming={isStreaming && !sections.needsAttention}
        />

        <ReviewSection
          title="Needs Attention"
          content={sections.needsAttention}
          variant="attention"
          isStreaming={isStreaming && sections.overview && !sections.lookingGood}
        />

        <ReviewSection
          title="Looking Good"
          content={sections.lookingGood}
          variant="good"
          isStreaming={isStreaming && sections.needsAttention && !sections.suggestions}
        />

        <ReviewSection
          title="Suggestions"
          content={sections.suggestions}
          variant="suggestions"
          isStreaming={isStreaming && sections.lookingGood}
        />
      </div>

      {onRetry && isComplete && (
        <div className="review-results__footer">
          <button
            type="button"
            className="review-results__review-button"
            onClick={onRetry}
          >
            Re-review
          </button>
        </div>
      )}
    </div>
  );
}

export { ReviewSection } from './ReviewSection';
```
  </action>
  <verify>
- File exists at frontend/src/components/ReviewResults/ReviewResults.tsx
- Exports ReviewResults and ReviewSection
- Renders all 4 section types
- Handles loading, streaming, complete, and error states
  </verify>
  <done>
- ReviewResults container created
- All states handled (empty, loading, streaming, complete, error)
- Sections render progressively
  </done>
</task>

<task type="auto">
  <name>Task 3: Create ReviewResults CSS</name>
  <files>frontend/src/components/ReviewResults/ReviewResults.css</files>
  <action>
Create styling for the review results components:

```css
/* ReviewResults container */
.review-results {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  padding: 1rem;
}

.review-results--empty,
.review-results--loading,
.review-results--error {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 200px;
  text-align: center;
  color: var(--color-text-muted, #666);
}

.review-results__loading-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--color-border, #e0e0e0);
  border-top-color: var(--color-primary, #0099cc);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.review-results__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--color-border, #e0e0e0);
}

.review-results__title {
  margin: 0;
  font-size: 1.25rem;
  font-weight: 600;
}

.review-results__status {
  font-size: 0.875rem;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
}

.review-results__status--streaming {
  background: var(--color-warning-bg, #fff3cd);
  color: var(--color-warning, #856404);
}

.review-results__status--complete {
  background: var(--color-success-bg, #d4edda);
  color: var(--color-success, #155724);
}

.review-results__sections {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.review-results__error {
  color: var(--color-error, #dc3545);
}

.review-results__retry-button,
.review-results__review-button {
  margin-top: 1rem;
  padding: 0.5rem 1rem;
  background: var(--color-primary, #0099cc);
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.review-results__retry-button:hover,
.review-results__review-button:hover {
  background: var(--color-primary-dark, #007399);
}

/* ReviewSection cards */
.review-section {
  background: var(--color-surface, #fff);
  border-radius: 8px;
  border: 1px solid var(--color-border, #e0e0e0);
  overflow: hidden;
}

.review-section__title {
  margin: 0;
  padding: 0.75rem 1rem;
  font-size: 1rem;
  font-weight: 600;
  border-bottom: 1px solid var(--color-border, #e0e0e0);
}

.review-section--overview .review-section__title {
  background: var(--color-info-bg, #cce5ff);
  color: var(--color-info, #004085);
}

.review-section--attention .review-section__title {
  background: var(--color-error-bg, #f8d7da);
  color: var(--color-error, #721c24);
}

.review-section--good .review-section__title {
  background: var(--color-success-bg, #d4edda);
  color: var(--color-success, #155724);
}

.review-section--suggestions .review-section__title {
  background: var(--color-warning-bg, #fff3cd);
  color: var(--color-warning, #856404);
}

.review-section__content {
  padding: 1rem;
  line-height: 1.6;
}

.review-section__content p {
  margin: 0 0 0.75rem;
}

.review-section__content p:last-child {
  margin-bottom: 0;
}

.review-section__content ul,
.review-section__content ol {
  margin: 0 0 0.75rem;
  padding-left: 1.5rem;
}

.review-section__content li {
  margin-bottom: 0.25rem;
}

.review-section__placeholder {
  color: var(--color-text-muted, #999);
  font-style: italic;
}

.review-section__streaming-indicator {
  padding: 0 1rem 0.5rem;
}

.review-section__cursor {
  display: inline-block;
  width: 2px;
  height: 1em;
  background: var(--color-primary, #0099cc);
  animation: blink 1s step-end infinite;
}

@keyframes blink {
  50% { opacity: 0; }
}
```
  </action>
  <verify>
- File exists at frontend/src/components/ReviewResults/ReviewResults.css
- Styles for all section variants (overview, attention, good, suggestions)
- Loading spinner animation defined
- Cursor blink animation for streaming
  </verify>
  <done>
- ReviewResults CSS created
- Section variants styled with appropriate colors
- Loading and streaming animations
  </done>
</task>

</tasks>

<verification>
1. All component files exist in frontend/src/components/ReviewResults/
2. TypeScript compiles: `cd frontend && npx tsc --noEmit`
3. react-markdown is in package.json dependencies
4. ReviewResults renders sections based on content
</verification>

<success_criteria>
- ReviewResults component displays sectioned cards
- Markdown content renders correctly
- Streaming state shows progressive content
- Error and empty states handled
</success_criteria>

<output>
After completion, create `.planning/phases/07-ai-first-architecture/07-05-SUMMARY.md`
</output>
